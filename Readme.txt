　GPS ログやカシミール3D、ヤマレコのヤマプラ/らくルート、その他で作ったルート（ GPX ファイル）を自分の速度で歩いた場合の所要時間（コースタイム）を見積るプログラムです。元の GPX ファイルは読み取るだけで何の変更もしません。
　ルートを KML ファイルで出力すれば国土地理院の地図で表示でき、その画像をダウンロードすればルートの地図も簡単に作れます。また、ルートの時間を見積時間に変更して、設定地点がウエイポイントになるGPXファイルで出力することもでき、それをGPS機器に計画ルートとして登録できます。
　コースタイムは距離と傾斜レンジごとの速度から求めており、標高は地理院地図の10ｍメッシュのデータ（DeM10B）をダウンロードしますので、GPX ファイルに標高データが無くても動きます。


（1）基本動作

　画面に GPX ファイルをドロップするか、ボタンを押してファイルを選択して入力ください。ルートの地図が表示され、合計時間と総距離、累積標高が出ます。
 
　地図の縮尺はマウスのホイールか地図上のボタンで変えられ、ドラッグ(マウスのボタンを押したまま移動)して移動できます。

　地図上でマウスをクリックすると、クリックした地点に一番近いルート上のポイントにマーカーが追加され、順ルート、逆ルートのコースタイムが出ます。
　マーカーを追加すると「＠マーカー名称」の中央のボックスにリストが表示されます。この時のマーカーの名称はクリック毎の連番で、上からスタート地点に近い順に並びます。
　マーカーを追加する順序に制約はなく、幾つでも追加できます。

　マーカーを消すには、消したいマーカーをクリックします。リストは自動的に変わります。
　スタート/ゴール、および各マーカーの名称は、「＠マーカー名称」のボックス内で変えられます。変えた名称は次にマーカーを追加するとコースタイムに反映されます。最後のマーカーは変更できないので、適当に1つ余分なマーカーを追加/削除してください。

　「区間距離の表示」は「する」を選択するとコースタイムに区間距離が表示されます。

　別のルートを見る時は、そのまま次のファイルを入力すればマーカーはリセットされます。
 
　GPX ファイル にウエイポイント（<wpt>要素）がある場合、それがマーカーとして取り込まれ、コースタイムが出ます。同じ名前のウエイポイントが複数ある場合は最初のものだけを読み込み、それ以外は無視されます。また、ルートを外れた所にあるウエイポイントも無視されます。
　ヤマレコの地名付きGPX ファイルの地名ポイントもマーカーとして取り込みます。地名のフリガナは削除されます。
　読み込んだウエイポイントおよび地名のマーカーはマウスをポイントすると名前が示されますが、クリックするとマーカーは消去されますのでご注意ください。


（2）ファイル出力

　ルートの方向とファイル種類を選択肢「出力」を押すと KMLまたはGPX ファイルがダウンロードフォルダに出力されます。ファイルの名前は変えられます。　

　KML ファイルはそのまま地理院地図に入力でき簡単にルートの地図が作れます。「マーカーアイコンのサイズ」はKMLファイルを地理院地図に表示した時のマーカーのサイズで、ルート地図を作るときに見やすくするために使います。地理院地図で示されるマーカーは表示されているマーカーとは異なります。

　GPX出力ファイルは標高値を地理院地図の10ｍメッシュの値、時間を見積時間に変更したもので、マーカーポイントはウエイポイントとして追加されます。


（3）速度設定

　速度は表の値で変えられます。[再表示] ボタンを押すと変えた値でコースタイムが表示されます。
　値を変えても立ち上げる毎に元の設定値になります。毎回、値を変えるのは面倒なので、ソースコードの7行目からの値を変えて上書き保存すれば、次からは変更した値で立ち上がります。
　保存するときは、文字コードをUTF8(BOMなし)で保存してください。

UpSpd1～UpSpd4 が上り速度（km/h)、DnSpd1～ DnSpd4 が下り速度です。

const UpSpd1 = 3.15, DnSpd1 = 3.53;
const UpSpd2 = 1.96, DnSpd2 = 2.73;
const UpSpd3 = 1.04, DnSpd3 = 1.79;
const UpSpd4 = 0.62, DnSpd4 = 0.85;

　また、傾斜（昇降値）の範囲も、11行目からの各定数で変えられます。
　UpRng1～UpRng3 が上り、DnRng1～DnRng3 が下りです。下りの数字のマイナス符号は必須です。

const UpRng1 = 20, DnRng1 = -30;
const UpRng2 = 40, DnRng2 = -50;
const UpRng3 = 80, DnRng3 = -80;

